# RESTful API 设计规范

![](../image/rest_api.jpg)

  做出一个好的API设计很难。API表达的是你的数据和你的数据使用者之间的契约，因此API的设计
  往往是站在使用者的角度进行的，而关于RESTful的介绍可以参考阮一峰的博客[理解RESTful架构
](http://www.ruanyifeng.com/blog/2011/09/restful.html), 这里同时也参考了他的另一篇博客
[RESTful API 设计指南](http://www.ruanyifeng.com/blog/2014/05/restful_api.html)
  在这方面有一篇很出名的文章，这里需要你自己解决翻墙问题[Principles of good RESTful API Design](https://codeplanet.io/principles-good-restful-api-design/)


## 定义

   这里有一些非常重要的术语，我将在本文里面一直用到它们

  + 资源(Resource)：一个对象的单独实例，如一只动物
  + 集合(Collection)：一群同种对象，如动物
  + HTTP：跨网络的通信协议
  + 客户端(Consumer)：可以创建HTTP请求的客户端应用程序
  + 第三方开发者(Third Party Developer)：这个开发者不属于你的项目但是有想使用你的数据
  + 服务器(Server)：一个HTTP服务器或者应用程序，客户端可以跨网络访问它
  + 端点(Endpoint)：这个API在服务器上的URL用于表达一个资源或者一个集合
  + 幂等(Idempotent)：无边际效应，多次操作得到相同的结果
  + URL段(Segment)：在URL里面已斜杠分隔的内容

## 数据设计与抽象

+ 理清业务数据流程
    
    规划好你的API的外观要先于开发它实际的功能。首先你要知道数据该如何设计和核心服务/应用程序会如何工作, 这部分的工作
    往往就是需要写好 PRD和DRD这些功能文档

+ 站在使用者的角度进行合理抽象
    
    有时候一个集合可以表达一个数据库表，而一个资源可以表达成里面的一行记录，但是这并不是常态。事实上，你的API应该尽可能
    通过抽象来分离数据与业务逻辑。这点非常重要，只有这样做你才不会打击到那些拥有复杂业务的第三方开发者，
    否则他们是不会使用你的API的。

+ 如何开放API
    
    当然你的服务可能很多部分是不应该通过API暴露出去的。比较常见的例子就是很多API是不允许第三方来创建用户的。

## HTTP 动词

一个好的RESTful API只允许第三方调用者使用这四个半HTTP动词进行数据交互，并且在URL段里面不出现任何其他的动词。
一般来说，GET请求可以被浏览器缓存（通常也是这样的）。例如，缓存请求头用于第二次用户的POST请求。
HEAD请求是基于一个无响应体的GET请求，并且也可以被缓存的。
    
+ GET (选择)：从服务器上获取一个具体的资源或者一个资源列表。
+ POST （创建）： 在服务器上创建一个新的资源。
+ PUT （更新）：以整体的方式更新服务器上的一个资源。
+ PATCH （更新）：只更新服务器上一个资源的一个属性。
+ DELETE （删除）：删除服务器上的一个资源。
+ HEAD ： 获取一个资源的元数据，如数据的哈希值或最后的更新时间。
+ OPTIONS：获取客户端能对资源做什么操作的信息。

## 版本化


